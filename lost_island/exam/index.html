<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Dubrovіn AR — Візуалізація алгоритмів</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">

    <!-- Бібліотеки через CDN -->
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs/dist/tf.min.js"></script>
</head>
<body>
    <h1>Dubrovіn AR — Візуалізація алгоритмів</h1>

    <div id="ar-interface">
      <div class="left-col">
        <div id="stepper"></div>
      </div>
      <div class="center-col">
        <div id="ar-container"></div>
        <!-- AR-сцена вставляється JS-ом саме сюди, щоб була по центру! -->
      </div>
      <div class="right-col">
        <div id="ml-result"></div>
      </div>
    </div>

    <!-- AR сцена, буде переміщено в JS у #ar-container -->
<a-scene
  mindar-image="imageTargetSrc: assets/targets.mind; autoStart: true;"
  color-space="sRGB"
  embedded
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: false"
  id="mindar-scene"
  style="width: 100%; max-width: 600px; height: 70vh; min-height: 350px; margin: 0 auto; display: block;"
>
      <a-entity mindar-image-target="targetIndex: 0">
        <!-- <a-box color="#EF2D5E" ...></a-box> -- видалено! -->
        <a-entity id="algo-content-0" position="0 0 0"></a-entity>
        <a-entity id="algo-result-0" position="0 0.65 0"></a-entity>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 1">
        <a-entity id="algo-content-1" position="0 0 0"></a-entity>
        <a-entity id="algo-result-1" position="0 0.65 0"></a-entity>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 2">
        <a-entity id="algo-content-2" position="0 0 0"></a-entity>
        <a-entity id="algo-result-2" position="0 0.65 0"></a-entity>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 3">
        <a-entity id="algo-content-3" position="0 0 0"></a-entity>
        <a-entity id="algo-result-3" position="0 0.65 0"></a-entity>
      </a-entity>
      <a-entity mindar-image-target="targetIndex: 4">
        <a-entity id="algo-content-4" position="0 0 0"></a-entity>
        <a-entity id="algo-result-4" position="0 0.65 0"></a-entity>
      </a-entity>
      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
    </a-scene>

    <script>
    // Перемістити a-scene в #ar-container після DOMContentLoaded
    window.addEventListener("DOMContentLoaded", () => {
      const arContainer = document.getElementById("ar-container");
      const scene = document.getElementById("mindar-scene");
      if (arContainer && scene) arContainer.appendChild(scene);
    });
    </script>

    <script src="app.js"></script>
    <script src="ml_optimizer.js"></script>
</body>
</html>
